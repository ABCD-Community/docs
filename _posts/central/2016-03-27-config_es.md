---
title: Configuración del módulo Central
author: Guilda Ascencio
date: 2016-03-27
category: es
layout: post
---

# Internacionalización

**ABCD** permite trabajar en diferentes lenguajes de dialogo. Cada lenguaje tiene su conjunto de mensajes y rótulos definidos en una sub-carpeta colocada en la carpeta de bases de datos, cuyo nombre corresponderá al código con el cual se identifica el lenguaje en el archivo **lang.tab**:

```
en=Ingles
es=Español
fr=Frances
pt=Portugues
```

El lenguaje activo se fija en el **config.php** a través del parámetro **$lang** cuyo valor debe corresponder a un código de los existentes en la tabla **lang.tab**

```
ej:
$lang="es";

Habilitará la página de inicio en español y se mostrará el menú para cambio de lenguaje
```

Si la instalacion contempla [múltiples carpetas de bases de datos](http://abcdwiki.net/Carpetas_con_las_bases_de_datos), el parámetro **$msg_path** de **config.php** permite definir una única ruta para el acceso a los archivos de mensaje, independientemente de la carpeta de bases de datos seleccionada. Las carpetas de bases de datos podrán no tener la subcarpeta **lang** ya que la misma se localizará a través de la ruta indicada en **$msg_path**.

Además de los lenguajes activos, existe la carpeta con el lenguaje virtual **00** el cual corresponde al universo de mensajes reconocidos por ABCD. Si se crea o modifica una opción, en el lenguaje **00** se agregarán los rótulos y mensajes correspondientes. De esta forma, si un mensaje no ha sido traducido a un idioma específico el mismo se tomará de la carpeta **000**.

Para el manejo del lenguaje de diálogo se usan los scripts localizados en **central/lang**.

## Crear un nuevo lenguaje de diálogo

1. Copie la carpeta **00** y renombrela con el código a utilizar para el nuevo lenguaje
2. Traduzca al lenguaje correspondiente
3. Agregue el nuevo lenguaje a la tabla **lang.tab** de nuevo lenguaje
4. Agregue el nuevo lengiaje a la tabla **lang.tab** de los lenguajes ya existentes

Para traducir la nueva mensajería puede utilizar **Traducir mensajes y rótulos** dentro de las opciones de **Administración** de ABCD. También puede utilizar un editor de archivos de texto teniendo en cuenta que no debe alterar bajo ningún concepto pa porcuón que se muestra antes del signo **=** de la tabla por cuanto este valor representa el código interno con el cual se hace referencia en los scripts al mensaje solicitado.

---

# Configuración inicial (config.php)

Parámetros del archivo config.php

El archivo config.php localizado en la carpeta central provee una serie de parámetros que permiten configurar algunas opciones de ABCD:

**date_default_timezone_set('America/Caracas');**

Establece la zona de la fecha y la hora. En algunos servidores la falta de este parámetro puede ocasionar un error del tipo "advertencia".

```
La lista de zonas válidas puede consultarse enTabla de zonas [https://www.php.net/manual/es/timezones.php](https://www.php.net/manual/es/timezones.php)
```

**$open_new_window**

Coloca por defecto el valor del checkbox Abrir en nueva ventana localizado en la pantalla de login de ABCD. Admite dos opciones:

```
Y : Marca que ABCD se desea abrir en una nueva ventana
N : No coloca ninguna marca en el checkbox
```

Si el checkbox no se marca, entonces, la siguiente ventana de ABCD se abre en la misma ventana del Login. Si se selecciona Abrir en nueva ventana, se abre una ventana nueva con el menú principal de ABCD y la ventana con el login permanece abierta. La versión actual de ABCD no permite abrir múltiples ventanas para ejecutarlo

**$context_menu**

```
Y : permite el uso del botón derecho para presentar el menú de contexto del navegador
N : inhabilita el uso del botón derecho

```

**$config_date_format**

Especifica el formato a utilizar para presentar y manejar la fecha en los procesos que tal campo se requiera

**$app_path**

Indica el nombre de la carpeta donde está localizado el módulo central de ABCD. No lo modifique ya que no se ha probado ABCD con la carpeta central localizada en otra ubicación

**$inventory_numeric**

Este parámetro determina si al leer el código de barra de un ejemplar en el sistema de préstamos, se desea eliminar los ceros a la izquierda. Si el valor es Y, se borran los ceros a la izquierda; si el valor es N , no se borran los ceros a la izquierda

**$max_inventory_length**

Indica el tamaño máximo y fijo del número de inventario. Las posiciones faltantes se rellenan con cero.

Ejemplo:

```
$max_inventory_length=8
// hará que el número de inventario ingresado como 567 se almacene como 00000567
```

Este parámetro se toma en cuenta en los procesos relacionados con asignación de los números de inventario de la base de datos copies

**$max_cn_length**

Indica el tamaño máximo y fijo del número de control. Las posiciones faltantes se rellenan con cero.

Ejemplo:

```
$max_cn_length=8
// hará que el número de control generado como 567 se almacene como 00000567
```

Este parámetro también es tomado en cuenta para generar los números de control correspondientes al utilizar la opción [*Menú principal* -> *Utilitarios* -> *Asignar número de control*]

**$log**

Si tiene el valor Y se lleva un log en la carpeta de las bases de datos, subcarpeta log donde se graban todas las llamadas al wxis . Este log se almacena en la forma de un archivo diario y contiene la siguiente información:

```
Primera linea:
    **Friday 30th of November 2012 07:34:35 AM Operador: abcd
    Identifica la fecha, hora y operador que ejecuta la transacción
Segunda línea:
    /central/dataentry/inicio_main.php /ABCD/www/htdocs/central/dataentry/wxis/login.xis
    IsisScript=/ABCD/www/htdocs/central/dataentry/wxis/login.xis
     ?base=acces&cipar=c:/bases_abcd/bases/par/acces.par
    &login=abcd&password=adm&path_db=c:/bases_abcd/bases/&cttype=s
    En la cual se identifican los siguientes elementos:
        Nombre del script php que se está ejecutando
        Nombre del script wxis que se está invocando
        Parámetros enviados al IsisScript para la ejecución correspondiente
```

Nota: Se está pensando en mantener también un log por base de datos que refleje las transacciones realizadas

**$db_path**

Camino de acceso por defecto a la carpeta donde se encuentran las bases de datos. Éste puede ser modificado si se usa el archivo dbpath.dat localizado en la raíz del servidor

**$msg_path** Camino de acceso a la carpeta donde se encuentan los archivos de mensajes (lang) y las páginas de de ayuda en línea (documentacion). Por defecto se usa **$db_path**, lo cual permite mantener la mensajería y páginas de ayuda en una sola carpeta para todas las carpetas de bases de datos

**$def**

Es un arreglo contentivo de los parámetros definidos en el archivo abcd.def, localizado en la carpeta a la cual apunta $db_path

```
VERSION=2.0 Beta
LEGEND1=2009  BIREME - Centro Latino Americano e do Caribe de Informação em Ciências da Saúde
LEGEND2=Version 2.0 Beta para pruebas
URL1=http://www.bireme.br
URL2=http://www.bireme.br
```

**$img_path**

Camino de acceso, por defecto, donde se almacenarán las imágenes y documentos digitales vinculados a los registros de las bases de datos. Este directorio por defecto puede modificarse utilizando el archivo dr_path.def que proporciona información más específica acerca del almacenamiento de los documentos digitales.

**$Wxis**

Este parámetro define la ruta donde se localiza el ejecutable wxis.exe

Cuando esta ruta está presente, wxis.exe se ejecuta desde una llamada a la línea de comando y los parámetros son pasados por el método GET.

**$wxisUrl**

Si se desea ejecutar el wxis.exe mediante el método POST coloque en este parámetro la URL desde la cual puede ser invocado el wxis. ejm:

```
$wxisUrl="http://localhost:9090/cgi-bin/$cisis_ver"."wxis.exe";
```

La ventaja de utilizar el método POST sobre el método GET reside en la cantidad de información que puede enviarse al servidor: 32K con el método GET, ilimitado con el método POST.

Si las dos variables - $Wxis y $wxisUrl - están presentes, entonces se da prioridad al método GET sobre el método POST

**$FCKConfigurationsPath**

Ruta hacia el archivo de configuración del editor FCKEditor utilizado para el ingreso de los campos del tipo Html Area definido en la FDT

**$FCKEditorPath**

Ruta hacia el editor FCKEditor utilizado para el ingreso de los campos del tipo Html Area definido en la FDT

**$adm_login**

**$adm_password**

Login y password provisionales para ser aceptados como administradores por ABCD. Se debe usar en el caso de pérdida de la base de datos de operadores (acces) o cuando por error se borra el usuario con derechos de administración

**$dirtree**

```
0 :  No permite explorar la carpeta de las bases de datos
1 : Permite explorar la carpeta de las bases de datos
```

La función de exploración también es dependiente de la permisología asignada al usuario. Si se asigna el valor 1 y el usuario posee la permisología adecuada, entonces en la sección de administración del menú principal se activa un nuevo enlace para permitir la entrada al plug-in de exploración de la carpeta.

**$change_password**

```
Y : Permite que los operadores de abcd puedan cambiar sus claves de acceso
```

Si no está definido este parámetro se asume que no pueden cambiar sus claves

**$MD5**

Use este parámetro si desea encriptar o no los passwords de operadores o de cualquier campo que este definido como tipo "password" en la FDT de una base de datos.

---

# Configuración ampliada (config extended.php)

El script **config_extended.php** permite modificar la configuración inicial definida a través del script **config.php** para particularizarla o ampliarla para una base de datos específica. Los parámetros que permiten esta particularización se encuentran definidos en el archivo [dr_path.def](http://abcdwiki.net/Dr_path.def).

Existen dos parámetros adicionales que no se leen desde archivo **dr_path.def**:

**show_acces** que se determina si se muestra (Y) o no (N) el acceso a la base de datos de operadores (acces) cuando la misma está incluída en el archivo **bases.dat**

**$fix_file_name** el cual indica la conversión que se va a hacer sobre el nombre de los archivos subidos al catalogar los registros, a efectos de eliminar los diacríticos. Este parámetro es un arreglo que indica la tabla de conversión de caracteres. Por defecto tiene el siguiente valor:

```
$fix_file_name = array(
'Š'=>'S', 'š'=>'s', 'Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A',
'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I',
'Î'=>'I', 'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O',
'Ù'=>'U', 'Ú'=>'U', 'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss', 'à'=>'a', 'á'=>'a',
'â'=>'a', 'ã'=>'a', 'ä'=>'a', 'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e',
'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i', 'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o',
'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u', 'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'þ'=>'b',
'ÿ'=>'y',' '=>'_' );

```

Como puede observarse se incluye el espacio en blanco el cual es sustituído por **_**

Si no desea que se realize la normalización del nombre de los archivo anteponga **//** al parámetro

---

# abcd.def

Este archivo colocado en la carpeta bases, lee los siguientes parámetros para la correcta adecuación de ABCD.



<div class="table-wrapper" markdown="block">

|Parámetro|Función|
|-|-|
|UNICODE|Establece si el interface y las bases de datos están definidas utilizando el juego de caracteres <br>• UNICODE (UTF-8) valor 1 <br>• ANSI (ISO-8859-1) valor 0 u omitido<br>Puede ser redefinido para cada base de datos a través del archivo de configuración http://abcdwiki.net/Dr_path.def.|
|CISIS_VERSION|Define (conjuntamente con el parámetro UNICODE) la versión de Cisis a ser utilizada para gestionar la base de datos. La combinación del parámetro UNICODE conjuntamente con el parámetro CISIS_VERSION nombrará la subcarpeta dentro de la carpeta cgi-bin desde donde se va a invocar el wxis. [ver http://wiki.abcdonline.info/index.php?title=ABCD_-_versiones_bases_de_datos Carpeta cgi-bin]|
|DEFAULT_LANG|No implementado todavía|
|MULTIPLE_DB_FORMAT|Indica si la carpeta bases almacena bases de datos de diferentes versiones de cisis. Luego, en el archivo http://abcdwiki.net/Dr_path.def de configuración de cada base de datos deberá indicarse bajo qué versión de cisis está definida la base de datos.|
|DIRTREE|Habilita / deshabilita el permiso para explorar la carpeta de la base de datos activa o las carpetas www, par y wrk de la carpeta de bases de datos.Si el parámetro está habilitado y el usuario es el administrador del sistema, en el menú principal del módulo de catalogación, bajo la sección Administracion se presenta una opción que permite explorar la carpeta donde están almacenadas todas las bases de datosSi el parámetro está habilitado y el usuario es el administrator del sistema o tiene habilitado el parámetro Explorar el directorio de las bases de datos en su perfil de usuario, en menú correspondiente a los utilitarios de la base de datos se presentan las opciones Explorar carpeta base de datos para tener acceso a los archivos de la base de datos seleccionada , y Explorar las carpetas del sistema para tener acceso al contenido de las carpetas par, wwww y wrk|
|DIRTREE_EXT|Establece las extensiones de los archivos que se permite mostrar cuando se hace la exploración de la carpeta "bases", la carpeta de una base de datos en particular,<br> par, www o wrk. <br>Las extensiones por defecto son:<br>*.def,*.iso,*.png,*.gif,*.jpg,*.pdf,*.xrf,*.mst,*.n01,*.n02,*.l01,*.l02,*.cnt,*.ifp, *.fmt,*.fdt,*.pft,*.fst,*.tab,*.txt,*.par,*.html,*.zip,Si agrega una nueva extensión debe seguir el formato que se muestra|
|PROFILES_PATH|Indica la dirección donde está localizado el archivo que tiene la definición de todos los parámetros habilitados para definir la permisología de los operadores (profiles.tab). Por defecto este archivo está localizado en la carpeta par/profiles del espacio de bases de datos activo, pero esta opción se habilita para facilitar el trabajo en aquellas instalaciones que tienen varias carpetas de bases de datos.|
|SECURE_PASSWORD_LENGTH|Largo mínimo que debe tener la clave de acceso para que sea considerada válida|
|SECURE_PASSWORD_LEVEL|Nivel de seguridad que se le desea asignar a la clave de acceso según las siguientes posibilidades:<br>0  Verifica solo que la clave esté presente<br> 1  Verifica que la clave cumpla con la longitud establecida en el parámetro SECURE_PASSWORD_LENGTH<br> 2  Además de los anteriores, verifica que exista un caracter alfabético en minúscula<br> 3  Además de los anteriores, verifica que exista al menos un caracter numérico<br> 4  Además de los anteriores, verifica que exista al menos una letra mayúscula<br> 5  Además de los anteriores, verifica que exista al menos un caracter especial:<br>.,!@#$%^&*?_~\-£()<br>Ejemplo:<br>SECURE_PASSWORD_LENGTH=8<br>SECURE_PASSWORD_LEVEL=5<br>abcABC1*  es válida<br>abcABC1   es inválidaLa validacion de la clave se encuentra en el script central/dataentry/password_check.js|
|Circulación y préstamos||
|CALENDAR||
|LOAN_POLICY|BY_USER significa que en el sistema de préstamos se presentará al operador las políticas a las cuales tiene acceso el usuario para que pueda seleccionar la que desea aplicar para el título en proceso de préstamo|
|EMAIL||
|AC_SUSP|Para que los plazos de suspensión sean acumulativos, esto es, si un usuario ya está suspendido, la nueva suspensión comenzará a regir a partir del fin de la anterior|
|ASK_LPN|Esta opción solicita los días de préstamo al momento de ingresar el código de usuario y el número de inventario a prestar|
|ILLOAN|Activa el préstamo interbibliotecario|
|RESERVATION|Habilita el módulo de reservas|
|Identificación, Logo y Estilos|![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1892635a-ff7e-45b1-8a86-9c4468bfc5e8/Untitled.png)|
|LEGEND1|Altera la primera línea del pie de página (obligatorio)|
|---|---|
|LEGEND2|Altera la segunda línea del pie de página (obligatorio)|
|LEGEND3|Altera la tercera línea del pie de página|
|URL1|URL para la primera línea|
|URL2|URL para la segunda linea|
|URL2|URL para la tercera línea|
|LOGO|Indicar el URL del logo a ser utiizado par identificar los encabezamientos de las ventanas|
|CSS_NAME|Indica el nombre de la carpeta donde están definidos los archivos de estilo ser utilizados. La carpeta con los estilos debe ser colocada como una subcarpeta dentro de central/css (ver http://abcdwiki.net/Cambiar_la_apariencia_(colores_y/o_iconos)_utilizados_en_la_interfaz_de_una_carpeta_de_bases_de_datos. Otra opción para ajustar los colores del interfaz es utilizar los parámetros que se mencionan a continuación:|
|BODY_BACKGROUND|Color de fondo de la ventana de ABCD|
|HEADING|Color del área donde se muestra el logo, la información del usuario y la información de la base de datos seleccionada|
|USERINFO_FONTCOLOR|Color de las letras de las etiquetas con la información del usuario, lista de bases de datos, lista de lenguajes y lista de módulos|
|SECTIONINFO|Color de fondo donde se muestra el nombre del proceso y base de datos activa|
|SECTIONINFO_FONTCOLOR|Color de las letras del SECTIONINFO|
|HELPER|Color del área donde se muestran los enlaces de ayuda y el nombre del script que se está ejecutandC|
|HELPER_FONTCOLOR|Color de las letras del area HELPER|
|FOOTER|Color de fondo del pie de página|
|FOOTER_FONTCOLOR|Color de las letras del pie de página|
|BG_WEB|Color de fondo de la ventana de solicitud de clave para los procesos en línea|
|FRAME_1H|Define, en la ventana de catalogación, el tamaño del marco donde se muestra el logo de la institución y los menues de módulos, bases de datos y lenguajes. Si no está presente se asume 90pxhttp://abcdwiki.net/index.php?title=Archivo:Frames.png&action=edit&redlink=1|
|FRAME_2H|Define, en la ventana de catalogación, el tamaño del marco donde se muestra barra de herramientas. Si no está presente se hace un cálculo dependiendo de la resolución del monitor: Si es mayor de 1200px el tamaño de este marco es de 45px; si es menor o igual a 1200px el tamaño de este marco es de 65px . Si el tamaño del marco es mayor de 48px la barra de herramientas se coloca en dos líneas independientemente de la resolución del monitor|

</div>

```
 Si en elabcd.def se encuentra algún parámetro que no esté en esta lista el mismo no se descarta sino
  se presenta en la hoja edición a efectos de no perder su valor.  Si el valor del parámetro se elimina entonces
  al actualizar el archivo abcd.def también se descartará el parámetro. Esto se hace con el fin de mantener parámetros
  no identificados que pudieran incidir sobre la ejecución de los procesos de ABCD
```

---
# Carpetas con las bases de datos

Las bases de datos que gestiona ABCD se encuentran localizadas en una carpeta que en la instalación estándard se denomina bases.

Todas las bases de datos alojadas bajo esa carpeta responden a la misma configuración en cuanto a préstamos, adquisiciones, control de usuarios, etc.

ABCD permite tener varias estructuras de carpetas "bases" que manejan sus recursos en forma independiente, lo cual facilita definir diferentes configuraciones sin duplicar los scripts y otros recursos utilizados.

Para tener acceso a esta posibilidad, debe colocar en la carpeta htdocs o en aquella carpeta donde resida el índice de entrada a ABCD, un archivo denominado **dbpath.dat** donde se especifiquen todas las carpetas "bases" que van a ser gestionadas por ABCD.

Este archivo se compone de 2 columnas separadas por el delimitador \|:

```
        En la primera columna se incluye la ruta a la carpeta "bases"
        En la segunda columna se incluye una corta descripción de lo que esa carpeta representa.
        Ejemplo:
              e:/bases_abcd/|ABCD
              e:/bases_A/|Carpeta Bases A
              e:/abcd_B/|Carpeta Bases B
              e:/abcd-C/|Carpeta Bases C

```

Con este archivo ABCD proveerá acceso a 4 carpetas "bases" localizadas en diferentes lugares.

**Nota**: todas las rutas a carpetas de bases de datos deben terminar con **/** ya que de otra forma se produce un error y no se puede salir de la hoja de inicio.

Al momento de lectura del programa que inicia ABCD (index.php) se verifica si existe el archivo **dbpath.dat**. En caso afirmativo se presenta un menú de selección para que el usuario determine el espacio de datos sobre el cual va a trabajar.

![http://abcdwiki.net/images/f/f6/Inicio.png](http://abcdwiki.net/images/f/f6/Inicio.png)

También se utiliza el parámetro $msg_path localizado en **config.php** para tener acceso a los archivos de mensajes.

Al escoger la carpeta de base de datos con la cual se quiere conectar, el usuario se autentica contra la base de operadores (acces) almacenada en ese espacio de bases de datos y ABCD trabaja normalmente utilizando las configuraciones y recursos almacenados en esa carpeta.

Los siguientes parámetros del archivo config.php, si están definidos en el archivo abcd.def correspondiente, se actualizan con los valores respectivos:

```
config.phpabcd.defSignificado del parámetro
    $msg_path                MSGPATH             Ruta hacia los archivos de mensajes y ayudas del sistema.
                                                 Si se omite se deben colocar estos archivos en la carpeta bases activa
    $institution_name        LEGEND2             Nombre de la institución
    $mx_path                 MXPATH              Ruta donde están localizados los utilitarios CISIS
                                                 (/abcd/www/cgi-bin/ en la instalación estándard de ABCD),
                                                 lo cual permite ejecutar los utilitarios CISIS en las funciones de mantenimiento
                                                 (debe ser la misma para todos los espacios de bases de datos)
    $lang                    LANG  	          Lenguaje por defecto
    $lang_db                 LANGDB              Lenguaje de las definiciones de bases de datos, por defecto
    $config_date_format      CONFIGDATEFORMAT 	  Formato de la fecha
    $img_path                IMGPATH 	          Ruta por defecto donde se almacenan las imágenes subidas de las bases de datos
                                                 (Este parámetro puede ser redefinido para cada base de datos, utilizando el archivo
                                                 dr_path.def localizado al interior de la carpeta de la base de datos en
                                                 particular (verVincular objetos digitales a registros)

```

Nota: en este momento solo están en funcionamiento los tres primeros parámetros

Esta opción se recomienda para el uso de administradores que gestionan varios sitios con configuraciones diferentes.

Hasta este momento las carpetas obligatorias son:

```
         acces
         documentacion
         lang  (Puede usarse el parámetro $msg_path del config.php para apuntar a una sola carpeta)
         par
         wrk
         www

```

En la raíz de la carpeta bases deben incluirse en forma obligatoria los archivos

```
         bases.dat
         lang.tab
         abcd.def

```

Conforme se agreguen los parámetros indicados aumentará el número de carpetas opcionales

Incluya luego:

```
          loans.dat,
          si en ese espacio de bases de datos no existe copies ni loanobjects
          (las existencias están colocadas directamente en el registro catalográfico)

```

```
          acquisitions.dat
          si se usa la base de datos copies para almacenar las existencias y se usa el módulo de adquisiciones.
          Este archivo indica cuáles catálogos bibliográficos entran en el proceso de adquisiciones

```

Debe usar el botón logout para salir de ABCD y conectarse a otra carpeta bases ya que de otra forma se mantendrán los datos de la sesión PHP.

Tips:

```
   *Ajustando el dbn.par de las bases de datos se pueden tener espacios de bases de datos que compartan la información
    de la misma base de datos (en los actuales momentos, solo la carpeta data de la base de datos)
   *Como el archivo abcd.def se almacena en cada carpeta bases es posible utilizar el parámetro LEGEND2
    para identificar plenamente el espacio de bases de datos que está siendo accedido.

```

Al momento de lectura del programa que inicia ABCD (index.php) se verifica si existe el archivo dbpath.dat. En caso afirmativo se presenta un menú de selección para que el usuario determine el espacio de datos sobre el cual va a trabajar.

---

# Permisología de los operadores de ABCD

ABCD posee varios niveles de permisología

## Permisos Base de datos

A cada usuario se le pueden asignar las bases de datos a las que está autorizado a accecder. Además, para cada base de datos se pueden asignar los permisos sobre los formatos de entrada y salida, además de las operaciones que puede realizar sobre cada base de datos.

Para estos efectos ABCD presenta una ventana donde coloca todas las bases de datos existentes en el archivo bases.dat, el cual mantiene la lista de bases de datos habilitadas en la carpeta de bases de datos. Para cada base de datos se muestran además los formatos de entrada y salida disponibles para que el administrador pueda determinar a cuáles tiene acceso el operador.

Como se dijo anteriormente, luego de las especificaciones de la base de datos se muestran las funciones del módulo de catalogación para que se le fije, a cada operador/base de datos, las funciones a las cuales tiene acceso:

Entonces, para cada base de datos se presenta la sigiuente información:

<table>
<tr><th>Bases de datos</th><th>Formatos de despliegue</th><th>Hojas de entrada</th></tr>
<tr><td>Cepal(biblo)</td><td>
Todos
Formato abiblo (abiblo)<br>
Formato bbiblo (bbiblo)<br>
Formato w (wbiblo)<br>
</td>
<td>Todos
Monografía (mm)<br>
Analítica de monografía (ma)<br>
Colección (cc)<br>
Monografía de colección (mc)<br>
Publicación seriada (ss)<br>
Analítica de seriada (sa)<br>
Tesis (tm)<br>
Tabla de contenido (tc)<br>
</td>
</tr>
<tr>
<td>Permisos: Dataentry (biblo)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Todos
Crear registros <br>
Eliminar registros<br>
Crear/editar valores por defecto<br>
Actualizar listas de selección y archivos de autoridades<br>
Agregar a loanobjects<br>
Crear/editar/guardar formatos de despliegue<br>
Modificar la definición de una base de datos<br>
Configurar el cliente Z39.50<br>
Almacenar expresiones de búsqueda<br>
Editar/eliminar expresiones de búsqueda previamente almacenadas<br>
Procesos de inventario<br>
</td>
<td>
Crear/editar/guardar claves de clasificación <br>
Importar<br>
Exportar<br>
Importar/exportar<br>
Modificar la definición de una base de datos<br>
Utilitarios de la base de datos<br>
Cambios globales<br>
Desbloquear la base de datos<br>
Listar registros bloqueados<br>
Desbloquear registros<br>
Editar registros protegidos<br>
</td>
<td>Copiar la base de datos a otra carpeta
Generar la lista invertida <br>
Utilitarios CISIS<br>
Configurar el cliente Z39.50<br>
Generar estadísticas <br>
Configurar estadísticas <br>
Restablecer el último número de inventario<br>
Restablecer el último número de control <br>
Editar la ayuda sobre los campos de la base de datos <br>
Explorar el directorio de las bases de datos<br>
Impresión de marbetes y códigos de barras<br>
</td>
</tr>
</table>


Este esquema se repite para cada base de datos. Al final de las mismas se muestran los permisos por módulo

## Permisos Administración

Contempla los mismos permisos establecidos para la administración de bases de datos, más los siguientes:

- Administrar usuarios
- Modificar la definición de una base de datos
- Crear/editar las páginas de ayuda del sistema

---

## Permisos Circulación

- Todos
- Configuración
- Prestar
- Devolver
- Renovar
- Suspender
- Eliminar multas
- Eliminar suspensiones
- Administración de las bases de datos
- Reportes
- Estadísticas

## Permisos Adquisiciones

- Todos
- Crear recomendaciones
- Aprobación/Rechazo de recomendaciones
- Proceso de licitación
- Decisión de adquisiciones
- Crear órdenes de compra
- Generar órdenes de compra
- Recepción de items (registrar copias)
- Administración de la base de datos de adquisiciones
- Restablecer número de control de sugerencias
- Reportes de aduisiciones

Note que si se definen permisos globales de administración, estos prevalecerán sobre los permisos particulares otorgados a una base de datos.

Luego de definidos los perfiles de usuario, se pueden asignar éstos a los usuarios en particular

Estos perfiles se guardan en la carpeta **par** de la carpeta de bases de datos, bajo una carpeta llamada **profiles**. En esa carpeta se localizan los siguientes archivos del sistema:

```
          profiles.lst  contentivo de la lista de perfiles ya definidos
          profiles.tab contentivo de la lista de permisos que se pueden asignar bajo ABCD

```

La traducción de los nombres de las opciones de los permisos se encuentra localizada en el archivo **profile.tab** de la carpeta del lenguaje correspondiente

## Estructura del archivo para el manejo de la permisología

*Para que las nuevas opciones de permisología se muestran tiene que estar seguro de tener actualizado en la carpeta mensajes **lang/00** el achivo profiles.tab*

La localización del archivo con los perfiles definido puede modificarse utilizando el parámetro **PROFILES_PATH** del archivo de configuración [Abcd.def](http://abcdwiki.net/Abcd.def)

El archivo **profiles.tab** contiene la lista de perfiles definidos, se almacena en la carpeta par/profiles y debe contener las siguientes opciones:

|Permiso|Significado|
|---|---|
|ALL=Y|Todos los permisos|
|CRDB=Y|Crear bases de datos|
|CREC=Y|Crear registros|
|EDREC=Y|Editar reistros|
|DELREC=Y|Eliminar registros|
|UDELREC=Y|Restaurar registros eliminados|
|CAPTURE=Y|Capturar registros desde otra base de datos|
|VALDEF=Y|Gestionar valores por defecto|
|Z3950CAT=Y|Catalogación Z3950|
|ADDCOP=Y|Agregar registros a la base de datos de copias|
|ADDLO=Y|Agregar registros a la base de datos de objetos de préstamo|
|PREC=Y|Imprimir registros|
|SAVEXPR=Y|Salvar expresiones de búsqueda|
|EDPFT=Y|Editar PFT|
|EDSORT=Y|Editar claves de clasificación|
|GLOBC=Y|Cambios globales|
|UNLOCKDB|Desbloquear base de datos|
|IMPEXP=Y|Importar - Exportar|
|IMPORT=Y|Importar|
|EXPORT=Y|Exportar|
|COPYDB|Copiar la base de datos a otra carpeta|
|FULLINV|Generación de la lista invertida|
|MODIFYDEF=Y|Modificar definiciones de bases de datos|
|DBUTILS=Y|Acceso a los utilitarios|
|Z3950CONF=Y|Configurar Z39.50|
|STATGEN=Y|Generar estadísticas|
|STATCONF=Y|Configurar estadísticas|
|USRADM=Y|Administración de usuarios|
|RESETLIN=Y|Restaurar el número de inventario|
|RESETLCN=Y|Restaurar el número de control|
|TRANSLATE=Y|Traducir mensajes del sistema|
|EDHLPDB=Y|Editar las ayudas de la base de datos|
|EDHLPSYS=Y|Editar las ayudas del sistema|
|EXDBDIR=Y|Explorar la carpeta de la base de datos|
|ACTPICKLIST=Y|Actualizar archvos de autoridades y listas de selección durante el procedimiento de ingreso|
|EDITSTOREDEXPR=Y|Editar expresiones de búsqueda previamente almacenadas|
|EDITPROTECTEDRECORD=Y|Editar registros protegidos|
|BARCODE=Y|Generar etiquedas y códigos de barra|
|INVENTORY=Y|Verificación del inventario físico|

[CIRCULATION]

|Permiso|Significado|
|---|---|
|CIRCALL=Y|Todos los permisos de circulación|
|CIRCFG=Y|Configurar|
|LOAN=Y|Prestar|
|RETURN=Y|Devolver|
|RENEW=Y|Renovar|
|SUSPEND=Y|Suspender|
|DELFINE=Y|Eliminar multas|
|DELSUS=Y|Eliminar suspensiones|
|CIRCDATABASES=Y|Revisar las bases de datos del proceso (Usarios, trasaciones, suspensioes y multas, reservas)|
|CIRCREPORTS=Y|Reportes de circulación|
|CIRCSTAT=Y|Estadísticaa|

[ACQUISITIONS]

| Permiso | Significado |
| --- | --- |
| ACQALL=Y |  |
| NEWSUGGESTIONS=Y |  |
| APPROVREJECT=Y |  |
| BIDDING=Y |  |
| DECISION=Y |  |
| CREATEORDER=Y |  |
| GENERATEORDER=Y |  |
| RECEIVING=Y |  |
| ACQDATABASES=Y |  |
| RESETCN=Y |  |
| ACQREPORTS=Y |  |

---

# Registro de los operadores

Llamamos operadores a aquellos usuarios que tienen asignados permisos sobre las bases de datos o sobre las funciones de los diferentes módulos de ABCD. Estos operadores se registran en una base de datos denominada acces con la siguiente estructura:



* 10  	Nombre del usuario
* 20	Identificación
* 30	Clave
* 40	Perfil
    * Administrador del sistema
    * Administrador de bases de datos
    * Operador de bases de datos
    * Operador de adquisiciones
    * Administrador de copias
    * Monografías Cepal
    * Administrador de préstamos
    * Administrador de copias
* 50	Fecha límite
* 60	Fecha ISO


Identificación y clave son los datos de autenticación del Operador. Si en archivo **config.php** está habilitado el parámetro **$change_password=1;** los operadores pueden cambiar su clave, pero no la identificación.

Perfil corresponde a uno de los perfiles de usuario definidos con anterioridad

Fecha límite corresponde a la fecha hasta la cual se le permite acceso al operador

Si por alguna razón esta base se corrompe o se borra y no se puede acceder al sistema, en el script config.php existen los parámetros

```
$adm_login="";
$adm_password="";

```

donde se puede colocar un login y password termporal para permitir el acceso a ABCD con derechos de administración.

---

# Cambiar la apariencia (colores y/o iconos) utilizados en la interfaz de una carpeta de bases de datos

Los archivos de estilo que se utilizan por defecto en ABCD se encuentran localizados en la carpeta **central/css**.

Para crear un nuevo estilo aplicable una carpeta de bases de datos en particular haga lo siguiente:

1. Crear bajo **central/css** una nueva carpeta con el nombre que ud. le quiera dar (sin espacios en blanco ni caracteres especiales). Ejm:correspondencia

2. Copiar a esta carpeta desde **central/css** los archivos: **template.css**, **layout.css** y **styles.css**.

```
template.css      incluye los estilos styles.css y layout.css utilizados para dar formato a las páginas
layout.css        Define el tamaño, márgenes, alineación y posición de las diferentes divisiones
                (<DIV> .. </DIV>) utilizadas para dar formato a las páginas
styles.css        Contiene los tamaños de letras, colores, enlaces a los íconos y demás elementos
                presentados en las páginas

```

3. El archivo **styles.css** en su versión original utiliza la técnica de "direccionamiento indirecto (../)" para hacer referencia a los iconos e imágenes que se presentan en las páginas. Ejemplo:

```
      A.saveButton IMG {
          background: url('../images/icon/defaultButton_save.png') no-repeat center;
      }

```

Esta forma de escribir el url indica que se debe subir un nivel dentro de la escala del directorio activo para localizar la carpeta images/icon donde se encuentra almacenado defaultButton_save.png. Como el directorio que hemos creado se encuentra un nivel más abajo de la carpeta css, todos los direccionamientos indirectos de styles.css deben ser cambiados de **../** a **../../**. Esto se puede realizar fácilmente con la opción reemplar de cualquier procesador de archivos .txt

4. Modifique los archivos styles.css y layout.css reflejando los cambios necesarios

5. Si quiere sustituir el logo de ABCD por una propio coloque en la carpeta creada (css/correspondencia) la imagen que desea utilizar teniendo ciudado de que sus dimensiones aproximadas sean 60px de alto y máximo 600px de ancho. Esto puede cambiar de acuerdo a las dimensiones de cada monitor y debe estar de acuerdo con las especificaciones de la clase

```
       .institutionalInfo {
		float: left;
		width: 60%;
		padding: 15px 0px 14px 15px;
	}

```

definida en layout.css

6. Modifique el archivo abcd.def localizado en la carpeta base agregando los parámetros:

```
           CSS_NAME=Nombre_de_la_carpeta_con_los_archivos_de_estilo_a_utilizar
           LOGO=../css/Nombre_de_la_carpeta_con_los_archivos_de_estilo_a_utilizar/Nombre_de_la_imagen

```

7. Agregue al principio del config_extended.php las siguiente lineas para que puedan leerse los parámetros recién creados:

```
          //archivos de estilo
               if (isset($def["CSS_NAME"])){
                   $css_name=$def["CSS_NAME"];
               }
           //Logo
               if (isset($def["LOGO"])){
                   $logo=$def["LOGO"];
               }

```

**Modificaciones al archivo estilos styles.css para cambio de fondos colores**:


| Elemento | Parámetro | Resultado |
| --- | --- | --- |
| BODY | background | Color de fondo de la ventana de ABCD |
| .heading | background-color | Color del área donde se muestra el logo |
| .userInfo, .userInfo A, .language, .language A | color | Cambiar el color de las letras de las etiquetas con la información del usuario, lista de bases de datos, lista de lenguajes y lista de módulos |
| .sectionInfo | background | Color de fondo donde se muestra el nombre del proceso y base de datos activa |
| .helper | background-color | color del área donde se muestra el botón de ayuda y el nombre del script que se está ejecutando |
| footer | backgroundcolor | Color de fondo de la franja y de letras donde se muestra el versión de abcd y la información de Bireme |

---

# Modificar la página de inicio

1. Cree a la misma altura de la carpeta central, una nueva carpeta denominada, por ejemplo, **misitio**

2. Cree bajo la carpeta **central/css/** una nueva carpeta denominada **misitio** y copie en su interior los archivos de estilo

```
template.css
layout.css
styles.css
```

3. Modifique los archivos de estilo siguiendo los lineamientos indicados en [[Adaptar los estilos](http://abcdwiki.net/wiki/es/index.php?title=Cambiar_la_apariencia_%28colores_y/o_iconos%29_utilizados_en_la_interfaz_de_una_carpeta_de_bases_de_datos)]

4. En la carpeta **misitio** copie la página **index.php** desde la carpeta HTDOCS o cualquiera que sea el punto de inicio de ABCD. Coloque también el archivo con las [Carpetas con las bases de datos](http://abcdwiki.net/Carpetas_con_las_bases_de_datos) para especificar la carpeta bases a utilizar en el proceso

5. En el **index.php** obtenido por la copia, agregue luego de la línea

```
      include ("$app_path/lang/lang.php");

```

las líneas

```
      $_SESSION["HOME"]="../../misitio/index.php";
      $css_name="misitio/";

```

6. Modifíque el título de la página

```
     <title>ABCD</title>

```

7. Modifique el llamado a los archivos de estilo, cambiando

```
   <link rel="stylesheet" rev="stylesheet"
                 href="<?php echo $app_path?>/css/template.css" type="text/css" media="screen"/>

```

por

```
   <link rel="stylesheet" rev="stylesheet"
             href="<?php echo $app_path?>/css/<?php echo $css_name?>template.css" type="text/css" media="screen"/>

```

7. Sustituya las sentencias

```
  <body>
      <div class="heading">
        <div class="institutionalInfo">
          <h1><img src=central/images/logoabcd.jpg >
                  <?php echo $institution_name?></h1>
        </div>
        <div class="userInfo"></div>
        <div class="spacer"> </div>
      </div>
      <div class="sectionInfo">
        <div class="breadcrumb"></div>
        <div class="actions"></div>
        <div class="spacer"> </div>
      </div>

```

por los comandos HTML que deseee utilizar para el encabezamiento de la página</font>

8. La sentencia

```
  <form name=administra onsubmit="javascript:return false" method=post action=<?php echo $app_path?>/common/inicio.php>

```

Señala el inicio de la forma donde se solicita el login y el password. Si no quiere habilitar cambio de lenguaje sustituya toda la referencia a

```
    <Select name=lang ... ... </select>
    por una variable escondida con el nombrelang y el valor correspondiente al código de lenguaje
    que desea utilizar
```

--- 

# Modificar el archivo bases.dat

El archivo **bases.dat** contiene la lista de bases de datos disponibles y generalmente se altera en forma automática en el proceso de creación y eliminación de bases de datos.

Si desea modificar manualmente este archivo use:

```
  Modificar la definición de bases de datos -> bases.dat

```

Se muestra una caja de texto para editar el archivo bases.dat el cual tiene 3 parámetros separados por '\|'

1. Nombre de la base de datos
2. Descripción de la base de datos
3. Está vinculada con la base de datos **copies**?

```
  Ejemplo:
       biblo|Cepal
       users|Usuarios de préstamo
       trans|Transacciones de préstamo
       suspml|Suspensiones y multas
       marc21|Marc21|Y
```

---

# Agregar una nueva opción al menú de catalogación

Si quiere agregar un nuevo botón la módulo de catalogación para conectar un menú que de acceso a procesos especiales no contemplados en ABCD, haga lo siguiente:

1. Cree bajo la carpeta **central** una nueva carpeta donde colocará todos los scripts que haya desarrollado
2. En el archivo de configuración [Abcd.def](http://abcdwiki.net/Abcd.def) agregue los siguientes parámetros:

```
  [MODULOS]
  TITLE=Procesos especiales
  SCRIPT="procesos/index.php"
  BUTTON=procesosButton
  SELBASE=Y

```

Estos parámetros deben agregarse al final de todos los parámetros y existentes en Abcd.def y tienen el siguiente significado:

```
  [MODULOS]  Palabra reservada que indica que lo que sigue a continuación es la definición
             de un nuevo botón
  TITLE      Título que se mostrará en el menú principal para reflejar la opción
  SCRIPT     Nombre de la carpeta y nombre del script que se activará para mostrar el menú
  BUTTON     Corresponde a la definición en el archivo de estilos (central/dataentry/css/styles.css
             donde se da formato al botón a presentar
  SELBASE    Indica si la activación del botón requiere que haya una base de datos seleccionada.
             Si el parámetro valeY entonces se le agregará el nombre del a base de datos seleccionada
             al url para invocar el script bajo la variablebase
             EJM: Url="../procesos/index.php&base=biblo
```

---